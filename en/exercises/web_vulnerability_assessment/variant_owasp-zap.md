OWASP ZAP allows an auditor to quickly identify common web vulnerabilities using the [OWASP framework](https://www.owasp.org/index.php/Main_Page) - either by a relatively intense spidering of the website or through a more tailored use of the proxy functionality of the tool.

OWASP ZAP provides a highly configurable tool to test for common website vulnerabilities. In addition to supporting organizational change to support general best practices for websites, OWASP can expose more specific vulnerabilties that may warrant action above and beyond general best practice work.

For a website that can be expected to withstand a dedicated spidering of its content, the automated mode will dig through and expose common vulnerabilities. The tool itself is relatively easy to use.

For more delicate sites, private sites, or other situations, OWASP can also proxy your web browser and test the pages you click through.

Quick Guide Setting up OWASP Zaproxy Scanner:

1. Download the latest version of Zaproxy from: https://github.com/zaproxy/zaproxy/wiki/Downloads

2. After installation, you will be brought into the OWASP Zaproxy's Session management page.
    - Yes, I want to persist this session with name based on the current timestamp
    - Yes, I want to persist this session but I want to specify the name and location
    - No, I don't want to persist this session at this moment in time
    - Remember my choice and do not ask me again

Note: By default, ZAP sessions are always recorded to disk in a HSQLDB database with a default name and location. If you do not persist the session, those files are deleted when you exit ZAP.

ZAP User Interface:

The ZAP user interface consist of the following options:

|Options|Description|
|-------------|-------------------------------------------------------|
|Menu Bar|Provides access to many of the automated and manual tools|
|Toolbar|Includes buttons which provide easy access to most commonly used features|
|Tree Window|Displays the Sites tree and the Scripts tree|
|Workspace Window|Displays requests, responses, and scripts and allows you to edit them|
|Information Window|Displays details of the automated and manual tools|
|Footer| Displays a summary of the alerts found and the status of the main automated tools|

Running Assessment:

Before you can run your assessment in ZAP, you need to configure your browser first to use ZAP as it's proxy. By default, ZAP uses:

Address:    localhost
Port:       8080

Note: Remember that Burpsuite also uses the same Address and port no. Be reminded to close any of which application that you are not using.

Since that ZAP is acting as a proxy between your browser and the web application, the use of SSL(HTTPS) may cause the certificate validation to fail and the connection be terminated. This happen because ZAP encrypts and decrypts traffic sent to the web application using the original web applications certificate. This is done so ZAP can access the plaintext in the request and the response.

To prevent this, ZAP creates an SSL cert automatically for each host you access, and signed by ZAP's CA certificate. To setup your browser to trust these SSL certs, you need to import and trust the ZAP root CA certificate. Once it's done, the other ZAP certificates signed by it will be trusted as well.

Keep the self-generated Root CA certificate to avoid creating a vulnerability.

1. Start ZAP and click Tools -> Options.
2. On the left pane of the Options window, click Dynamic SSL Certificates.
3. On the right pane, click Save.
4. Select a location to save the certificate to and click Save. Be sure to retain the .cer file extension.

To install the ZAP Root CA certificate as trusted root certificate for Windows/Chrome:
 
1. Browse to the certificate file location.
2. Right-click on the certificate file and then click Install Certificate.
3. In the Certificate Import Wizard, select either Current User or Local Machine as the scope of the certificate, then click Next.
4. Select Place all certificates in the following store. 
5. Click Browse and select Trusted Root Certificate Authorities or Trusted Root Certificates (depending on your version of Windows) as the certificate store, then click Next.
6. Click Finish.
7. Review the security warning about trusted root certificates and click Yes if the warning is accepted. 

To verify that the ZAP Root CA certificate is installed:

1. Open Control Panel and click Internet Options.
2. On the Content tab, in the Certificates section, click Certificates.
3. On the Trusted Root Certificates tab, verify that the OWASP ZAP Root CA certificate is listed. 

If you are testing using Firefox, you need to install the ZAP Root CA certificate a second time
into Firefoxâ€™s own certificate store.

To install the ZAP Root CA for Mozilla Firefox:

1. Start Firefox and click Preferences.
2. On the Advanced tab, click the Encryption tab.
3. Click View Certificates.
4. On the Trusted root certificates tab, click Import and select the ZAP Root CA file you saved previously.
5. In the Import wizard, select Trust this CA to identify web sites.
6. Click OK. 

Additional OWASP ZAP references:

 * [Wiki and QuickStart Guide](https://code.google.com/p/zaproxy/wiki/HelpStartStart)
 * [Overall walkthrough](http://resources.infosecinstitute.com/which-weapon-should-i-choose-for-web-penetration-testing-3-0)
 * [Testing with Metasploitable VM](http://cyberarms.wordpress.com/2014/06/05/quick-and-easy-website-vulnerability-scans-with-owasp-zap/ (see also https://www.owasp.org/index.php/Webgoat and http://sourceforge.net/projects/samurai)
 * [Walkthrough of automated mode](https://blog.codecentric.de/en/2013/10/automated-security-testing-web-applications-using-owasp-zed-attack-proxy)
 * [Walkthrough of proxy usage](https://blog.42.nl/articles/securing-web-applications-using-owasp-zap-passive-mode)

























